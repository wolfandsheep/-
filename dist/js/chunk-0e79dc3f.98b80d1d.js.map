{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.push.js","webpack:///./src/views/prodetail/index.vue","webpack:///./src/api/comment.js","webpack:///src/views/prodetail/index.vue","webpack:///./src/views/prodetail/index.vue?39ff","webpack:///./src/views/prodetail/index.vue?1e2f","webpack:///./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack:///./node_modules/core-js/internals/array-set-length.js","webpack:///./src/views/prodetail/index.vue?134c","webpack:///./src/api/product.js","webpack:///./src/assets/default-avatar.png","webpack:///./node_modules/core-js/internals/is-array.js"],"names":["$","toObject","lengthOfArrayLike","setArrayLength","doesNotExceedSafeInteger","fails","INCORRECT_TO_LENGTH","push","call","length","properErrorOnNonWritableLength","Object","defineProperty","writable","error","TypeError","FORCED","target","proto","arity","forced","item","O","this","len","argCount","arguments","i","render","_vm","_c","_self","staticClass","attrs","on","$event","$router","go","onChange","scopedSlots","_u","key","fn","_v","_s","current","images","proxy","_l","image","index","external_url","detail","goods_price_min","goods_price_max","goods_sales","goods_name","total","commentList","comment_id","user","avatar_url","defaultImg","nick_name","score","content","create_time","domProps","cartTotal","_e","addFn","addBuy","mode","model","value","showPannel","callback","$$v","expression","goods_image","stock_total","addCount","addCart","staticRenderFns","getCommentApi","goodsId","limit","request","get","params","name","components","CountBox","data","computed","$route","id","created","getProDetail","getComment","methods","resp","getProDetailApi","goods_images","list","token","$store","getters","$dialog","confirm","title","message","confirmButtonText","cancelButtonText","then","replace","path","query","backUrl","fullPath","catch","addCartApi","skuList","goods_sku_id","component","$TypeError","MAX_SAFE_INTEGER","module","exports","it","DESCRIPTORS","isArray","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","undefined","getProListApi","obj","categoryId","goodsName","page","classof","Array","argument"],"mappings":"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","file":"js/chunk-0e79dc3f.98b80d1d.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"prodetail\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"商品详情页\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('van-swipe',{attrs:{\"autoplay\":4000},on:{\"change\":_vm.onChange},scopedSlots:_vm._u([{key:\"indicator\",fn:function(){return [_c('div',{staticClass:\"custom-indicator\"},[_vm._v(_vm._s(_vm.current + 1)+\" / \"+_vm._s(_vm.images.length))])]},proxy:true}])},_vm._l((_vm.images),function(image,index){return _c('van-swipe-item',{key:index},[_c('img',{attrs:{\"src\":image.external_url}})])}),1),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"price\"},[_c('span',{staticClass:\"now\"},[_vm._v(\"￥\"+_vm._s(_vm.detail.goods_price_min))]),_c('span',{staticClass:\"oldprice\"},[_vm._v(\"￥\"+_vm._s(_vm.detail.goods_price_max))])]),_c('div',{staticClass:\"sellcount\"},[_vm._v(\"已售\"+_vm._s(_vm.detail.goods_sales)+\"件\")])]),_c('div',{staticClass:\"msg text-ellipsis-2\"},[_vm._v(\" \"+_vm._s(_vm.detail.goods_name)+\" \")]),_c('div',{staticClass:\"service\"},[_c('div',{staticClass:\"left-words\"},[_c('span',[_c('van-icon',{attrs:{\"name\":\"passed\"}}),_vm._v(\"七天无理由退货\")],1),_c('span',[_c('van-icon',{attrs:{\"name\":\"passed\"}}),_vm._v(\"48小时发货\")],1)]),_c('div',{staticClass:\"right-icon\"},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)])]),_c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"comment-title\"},[_c('div',{staticClass:\"left\"},[_vm._v(\"商品评价 (\"+_vm._s(_vm.total)+\"条)\")]),_c('div',{staticClass:\"right\"},[_vm._v(\"查看更多 \"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('div',{staticClass:\"comment-list\"},_vm._l((_vm.commentList),function(item){return _c('div',{key:item.comment_id,staticClass:\"comment-item\"},[_c('div',{staticClass:\"top\"},[_c('img',{attrs:{\"src\":item.user.avatar_url || _vm.defaultImg,\"alt\":\"\"}}),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.user.nick_name))]),_c('van-rate',{attrs:{\"size\":16,\"value\":item.score / 3,\"color\":\"#ffd21e\",\"void-icon\":\"star\",\"void-color\":\"#eee\"}})],1),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(item.create_time)+\" \")])])}),0)]),_c('div',{staticClass:\"desc\",domProps:{\"innerHTML\":_vm._s(_vm.detail.content)}}),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"icon-home\"},[_c('van-icon',{attrs:{\"name\":\"wap-home-o\"}}),_c('span',{on:{\"click\":function($event){return _vm.$router.push('/home')}}},[_vm._v(\"首页\")])],1),_c('div',{staticClass:\"icon-cart\",on:{\"click\":function($event){return _vm.$router.push('/cart')}}},[(_vm.cartTotal > 0)?_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.cartTotal))]):_vm._e(),_c('van-icon',{attrs:{\"name\":\"shopping-cart-o\"}}),_c('span',[_vm._v(\"购物车\")])],1),_c('div',{staticClass:\"btn-add\",on:{\"click\":_vm.addFn}},[_vm._v(\"加入购物车\")]),_c('div',{staticClass:\"btn-buy\",on:{\"click\":_vm.addBuy}},[_vm._v(\"立刻购买\")])]),_c('van-action-sheet',{attrs:{\"title\":_vm.mode === 'cart' ? '加入购物车' : '立即购买'},model:{value:(_vm.showPannel),callback:function ($$v) {_vm.showPannel=$$v},expression:\"showPannel\"}},[_c('div',{staticClass:\"content\"},[_c('van-action-sheet',{attrs:{\"title\":_vm.mode === 'cart' ? '加入购物车' : '立刻购买'},model:{value:(_vm.showPannel),callback:function ($$v) {_vm.showPannel=$$v},expression:\"showPannel\"}},[_c('div',{staticClass:\"product\"},[_c('div',{staticClass:\"product-title\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":_vm.detail.goods_image,\"alt\":\"\"}})]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"price\"},[_c('span',[_vm._v(\"¥\")]),_c('span',{staticClass:\"nowprice\"},[_vm._v(_vm._s(_vm.detail.goods_price_min))])]),_c('div',{staticClass:\"count\"},[_c('span',[_vm._v(\"库存\")]),_c('span',[_vm._v(_vm._s(_vm.detail.stock_total))])])])]),_c('div',{staticClass:\"num-box\"},[_c('span',[_vm._v(\"数量\")]),_c('CountBox',{model:{value:(_vm.addCount),callback:function ($$v) {_vm.addCount=$$v},expression:\"addCount\"}})],1),(_vm.detail.stock_total > 0)?_c('div',{staticClass:\"showbtn\"},[(_vm.mode === 'cart')?_c('div',{staticClass:\"btn\",on:{\"click\":_vm.addCart}},[_vm._v(\"加入购物车\")]):_c('div',{staticClass:\"btn now\"},[_vm._v(\"立刻购买\")])]):_c('div',{staticClass:\"btn-none\"},[_vm._v(\"该商品已抢完\")])])])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nimport request from './request.js'\r\n\r\n// 1.获取商品评价\r\nexport function getCommentApi (goodsId, limit) {\r\n  return request.get('/comment/listRows', {\r\n    params: {\r\n      goodsId,\r\n      limit\r\n    }\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"prodetail\">\r\n    <van-nav-bar fixed title=\"商品详情页\" left-arrow @click-left=\"$router.go(-1)\" />\r\n\r\n    <van-swipe :autoplay=\"4000\" @change=\"onChange\">\r\n      <van-swipe-item v-for=\"(image, index) in images\" :key=\"index\">\r\n        <img :src=\"image.external_url\" />\r\n      </van-swipe-item>\r\n\r\n      <template #indicator>\r\n        <div class=\"custom-indicator\">{{ current + 1 }} / {{ images.length }}</div>\r\n      </template>\r\n    </van-swipe>\r\n\r\n    <!-- 商品说明 -->\r\n    <div class=\"info\">\r\n      <div class=\"title\">\r\n        <div class=\"price\">\r\n          <span class=\"now\">￥{{ detail.goods_price_min }}</span>\r\n          <span class=\"oldprice\">￥{{ detail.goods_price_max }}</span>\r\n        </div>\r\n        <div class=\"sellcount\">已售{{ detail.goods_sales }}件</div>\r\n      </div>\r\n      <div class=\"msg text-ellipsis-2\">\r\n        {{ detail.goods_name }}\r\n      </div>\r\n\r\n      <div class=\"service\">\r\n        <div class=\"left-words\">\r\n          <span><van-icon name=\"passed\" />七天无理由退货</span>\r\n          <span><van-icon name=\"passed\" />48小时发货</span>\r\n        </div>\r\n        <div class=\"right-icon\">\r\n          <van-icon name=\"arrow\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 商品评价 -->\r\n    <div class=\"comment\">\r\n      <div class=\"comment-title\">\r\n        <div class=\"left\">商品评价 ({{ total }}条)</div>\r\n        <div class=\"right\">查看更多 <van-icon name=\"arrow\" /> </div>\r\n      </div>\r\n      <div class=\"comment-list\">\r\n        <div class=\"comment-item\" v-for=\"item in commentList\" :key=\"item.comment_id\">\r\n          <div class=\"top\">\r\n            <img :src=\"item.user.avatar_url || defaultImg\" alt=\"\">\r\n            <div class=\"name\">{{ item.user.nick_name }}</div>\r\n            <van-rate :size=\"16\" :value=\"item.score / 3\" color=\"#ffd21e\" void-icon=\"star\" void-color=\"#eee\" />\r\n          </div>\r\n          <div class=\"content\">\r\n            {{ item.content }}\r\n          </div>\r\n          <div class=\"time\">\r\n            {{ item.create_time }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 商品描述 -->\r\n    <div class=\"desc\" v-html=\"detail.content\"></div>\r\n\r\n    <!-- 底部 -->\r\n    <div class=\"footer\">\r\n      <div class=\"icon-home\">\r\n        <van-icon name=\"wap-home-o\" />\r\n        <span @click=\"$router.push('/home')\">首页</span>\r\n      </div>\r\n      <div class=\"icon-cart\" @click=\"$router.push('/cart')\">\r\n        <span v-if=\"cartTotal > 0\" class=\"num\">{{ cartTotal }}</span>\r\n        <van-icon name=\"shopping-cart-o\" />\r\n        <span>购物车</span>\r\n      </div>\r\n      <div class=\"btn-add\" @click=\"addFn\">加入购物车</div>\r\n      <div class=\"btn-buy\" @click=\"addBuy\">立刻购买</div>\r\n    </div>\r\n\r\n    <!-- 弹层 -->\r\n    <van-action-sheet v-model=\"showPannel\" :title=\"mode === 'cart' ? '加入购物车' : '立即购买'\">\r\n      <div class=\"content\">\r\n        <van-action-sheet v-model=\"showPannel\" :title=\"mode === 'cart' ? '加入购物车' : '立刻购买'\">\r\n          <div class=\"product\">\r\n            <div class=\"product-title\">\r\n              <div class=\"left\">\r\n                <img :src=\"detail.goods_image\" alt=\"\">\r\n              </div>\r\n              <div class=\"right\">\r\n                <div class=\"price\">\r\n                  <span>¥</span>\r\n                  <span class=\"nowprice\">{{detail.goods_price_min}}</span>\r\n                </div>\r\n                <div class=\"count\">\r\n                  <span>库存</span>\r\n                  <span>{{detail.stock_total}}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"num-box\">\r\n              <span>数量</span>\r\n              <CountBox v-model=\"addCount\"></CountBox>\r\n            </div>\r\n            <div class=\"showbtn\" v-if=\"detail.stock_total > 0\">\r\n              <div class=\"btn\" v-if=\"mode === 'cart'\" @click=\"addCart\">加入购物车</div>\r\n              <div class=\"btn now\" v-else>立刻购买</div>\r\n            </div>\r\n            <div class=\"btn-none\" v-else>该商品已抢完</div>\r\n          </div>\r\n        </van-action-sheet>\r\n      </div>\r\n    </van-action-sheet>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入API\r\nimport { getProDetailApi } from '@/api/product.js'\r\nimport { getCommentApi } from '@/api/comment.js'\r\nimport { addCartApi } from '@/api/cart.js'\r\n// 导入默认头像\r\nimport defaultImg from '@/assets/default-avatar.png'\r\n\r\nexport default {\r\n  name: 'ProDetail',\r\n  components: {\r\n    CountBox: () => import('@/components/CountBox.vue')\r\n  },\r\n  data () {\r\n    return {\r\n      images: [], // 图片\r\n      current: 0,\r\n      detail: {}, // 商品详情信息\r\n      total: 0, // 评价总数\r\n      limit: 5, // 要显示的评论数量\r\n      commentList: [], // 评价列表\r\n      defaultImg, // 默认头像\r\n      mode: 'cart', // 默认弹层打开的是加入购物车\r\n      showPannel: false, // 控制弹层是否显示\r\n      addCount: 1, // 商品数量\r\n      cartTotal: '' // 购物车总数量(购物车角标)\r\n    }\r\n  },\r\n  computed: {\r\n    // 地址栏参数id\r\n    goodsId () {\r\n      return this.$route.params.id\r\n    }\r\n  },\r\n  created () {\r\n    // 获取商品详情数据\r\n    this.getProDetail()\r\n    // 数据商品的评论数据\r\n    this.getComment()\r\n  },\r\n  methods: {\r\n    // 轮播图滚动需要的函数\r\n    onChange (index) {\r\n      this.current = index\r\n    },\r\n    // 1.获取商品详情数据\r\n    async getProDetail () {\r\n      const resp = await getProDetailApi(this.goodsId)\r\n      this.detail = resp.detail\r\n      this.images = resp.detail.goods_images\r\n    },\r\n    // 2.获取商品评论数据\r\n    async getComment () {\r\n      const resp = await getCommentApi(this.goodsId, this.limit)\r\n      this.commentList = resp.list\r\n      this.total = resp.total\r\n    },\r\n    // 3.加入购物车（按钮）\r\n    addFn () {\r\n      this.mode = 'cart'\r\n      // 打开弹层\r\n      this.showPannel = true\r\n    },\r\n    // 4.立即购买（按钮）\r\n    addBuy () {\r\n      this.mode = 'buynow'\r\n      // 打开弹层\r\n      this.showPannel = true\r\n    },\r\n    // 弹层内的加入购物车（点了要真的加入到购物车）\r\n    async addCart () {\r\n      const token = this.$store.getters.token\r\n      // (1) token不存在的情况\r\n      if (!token) {\r\n        // 弹出提示窗口\r\n        this.$dialog\r\n          .confirm({\r\n            title: '温馨提示',\r\n            message: '此时需要先登录才能继续操作哦',\r\n            confirmButtonText: '去登录',\r\n            cancelButtonText: '再逛逛'\r\n          })\r\n          .then(() => {\r\n            // 确定，去登录页(如果希望登录后跳转回这一页，需要传参,fullpath包含了全部参数)\r\n            this.$router.replace({\r\n              path: '/login',\r\n              query: {\r\n                backUrl: this.$route.fullPath\r\n              }\r\n            })\r\n          })\r\n          .catch(() => {\r\n            // 取消，默认会关闭弹出\r\n          })\r\n        return\r\n      }\r\n\r\n      // (2) token存在的情况\r\n      // 调用api，将商品加入购物车\r\n      const resp = await addCartApi(\r\n        this.goodsId,\r\n        this.addCount,\r\n        this.detail.skuList[0].goods_sku_id\r\n      )\r\n      this.cartTotal = resp.cartTotal\r\n      // 关闭弹窗\r\n      this.showPannel = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.prodetail {\r\n  padding-top: 46px;\r\n  ::v-deep .van-icon-arrow-left {\r\n    color: #333;\r\n  }\r\n  img {\r\n    display: block;\r\n    width: 100%;\r\n  }\r\n  .custom-indicator {\r\n    position: absolute;\r\n    right: 10px;\r\n    bottom: 10px;\r\n    padding: 5px 10px;\r\n    font-size: 12px;\r\n    background: rgba(0, 0, 0, 0.1);\r\n    border-radius: 15px;\r\n  }\r\n  .desc {\r\n    width: 100%;\r\n    overflow: scroll;\r\n    ::v-deep img {\r\n      display: block;\r\n      width: 100% !important;\r\n    }\r\n  }\r\n  .info {\r\n    padding: 10px;\r\n  }\r\n  .title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .now {\r\n      color: #fa2209;\r\n      font-size: 20px;\r\n    }\r\n    .oldprice {\r\n      color: #959595;\r\n      font-size: 16px;\r\n      text-decoration: line-through;\r\n      margin-left: 5px;\r\n    }\r\n    .sellcount {\r\n      color: #959595;\r\n      font-size: 16px;\r\n      position: relative;\r\n      top: 4px;\r\n    }\r\n  }\r\n  .msg {\r\n    font-size: 16px;\r\n    line-height: 24px;\r\n    margin-top: 5px;\r\n  }\r\n  .service {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    line-height: 40px;\r\n    margin-top: 10px;\r\n    font-size: 16px;\r\n    background-color: #fafafa;\r\n    .left-words {\r\n      span {\r\n        margin-right: 10px;\r\n      }\r\n      .van-icon {\r\n        margin-right: 4px;\r\n        color: #fa2209;\r\n      }\r\n    }\r\n  }\r\n\r\n  .comment {\r\n    padding: 10px;\r\n  }\r\n  .comment-title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .right {\r\n      color: #959595;\r\n    }\r\n  }\r\n\r\n  .comment-item {\r\n    font-size: 16px;\r\n    line-height: 30px;\r\n    .top {\r\n      height: 30px;\r\n      display: flex;\r\n      align-items: center;\r\n      margin-top: 20px;\r\n      img {\r\n        width: 20px;\r\n        height: 20px;\r\n      }\r\n      .name {\r\n        margin: 0 10px;\r\n      }\r\n    }\r\n    .time {\r\n      color: #999;\r\n    }\r\n  }\r\n  // 底部\r\n  .footer {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 55px;\r\n    background-color: #fff;\r\n    border-top: 1px solid #ccc;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    .icon-home,\r\n    .icon-cart {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-size: 14px;\r\n      .van-icon {\r\n        font-size: 24px;\r\n      }\r\n    }\r\n    // 购物车角标\r\n     .icon-cart {\r\n      position: relative;\r\n      padding: 0 6px;\r\n      .num {\r\n        z-index: 999;\r\n        position: absolute;\r\n        top: -2px;\r\n        right: 0;\r\n        min-width: 16px;\r\n        padding: 0 4px;\r\n        color: #fff;\r\n        text-align: center;\r\n        background-color: #ee0a24;\r\n        border-radius: 50%;\r\n      }\r\n    }\r\n\r\n    .btn-add,\r\n    .btn-buy {\r\n      height: 36px;\r\n      line-height: 36px;\r\n      width: 120px;\r\n      border-radius: 18px;\r\n      background-color: #ffa900;\r\n      text-align: center;\r\n      color: #fff;\r\n      font-size: 14px;\r\n    }\r\n    .btn-buy {\r\n      background-color: #fe5630;\r\n    }\r\n  }\r\n}\r\n\r\n.tips {\r\n  padding: 10px;\r\n}\r\n\r\n// 弹层\r\n.product {\r\n  .product-title {\r\n    display: flex;\r\n    .left {\r\n      img {\r\n        width: 90px;\r\n        height: 90px;\r\n      }\r\n      margin: 10px;\r\n    }\r\n    .right {\r\n      flex: 1;\r\n      padding: 10px;\r\n      .price {\r\n        font-size: 14px;\r\n        color: #fe560a;\r\n        .nowprice {\r\n          font-size: 24px;\r\n          margin: 0 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .num-box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 10px;\r\n    align-items: center;\r\n  }\r\n\r\n  .btn,\r\n  .btn-none {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    margin: 20px;\r\n    border-radius: 20px;\r\n    text-align: center;\r\n    color: rgb(255, 255, 255);\r\n    background-color: rgb(255, 148, 2);\r\n  }\r\n  .btn.now {\r\n    background-color: #fe5630;\r\n  }\r\n  .btn-none {\r\n    background-color: #cccccc;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3e863cd7&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3e863cd7&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e863cd7\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3e863cd7&prod&lang=less&scoped=true\"","import request from './request'\r\n\r\n// 1.根据搜索的关键词，或者分类id，获取搜索商品数据\r\nexport function getProListApi (obj) {\r\n  const { categoryId, goodsName, page } = obj\r\n  return request.get('/goods/list', {\r\n    params: {\r\n      categoryId,\r\n      goodsName,\r\n      page\r\n    }\r\n  })\r\n}\r\n\r\n// 2.根据id，获取商品详情数据\r\nexport const getProDetailApi = (goodsId) => {\r\n  return request.get('/goods/detail', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkBAMAAACCzIhnAAAAKlBMVEXp6en////9/f3o6Ojw8PDj4+Pl5eXh4eHs7Oz7+/v09PTy8vL4+Pj29vY+GdZKAAADDElEQVRYw+3Wv0sbYRjA8ZNwp+Li89YhUQO+b6F0PDTx6NBBtHXpcBDPRkvhakiC1CGghqIIyRCdOqQlHdouUoqlm1Co0KUZhK4tFPvn9MnF5n6+P4R2KT6EhJe8n3y5ewOJduXJXZNr8l+Tecd5uFu6CinbS18+LR06pjJxxl4ATuZD2anMaXMKxHkOl/P6LFVxCnJi3YXAvP34zZWR1A6E54aUVI8j5J4mIcZBRExLr8WKRk5cGdmHyFyYEqI3o2SqJiH5NkRHl5B9iE3HFBJjI07StpDoC3Ey7QrJfBviYwiJCwmzLCQ7SeRCSNaTyEtTQFKbSSTtishsIrEFxBi6Jn+FFAWk+iSR1PnEyHWTSObM5pJSG5KnxSWPgDMdk0ce88gMl6zzyE0uWRnsoWFyziUubiWMAiMM8AmdtwT4zL38fJcxRnAXw6EI+0sGBpfoTUJIbxfF6ZnL5aTNP/0DklSht1w+KVFK4xVY1vjkqEkSKtltAdH2IF6Bjisi1vd4BfSGiByukWiFjtvi35dKO1qBI01M8AZEKtmahKQ2wxVK07aEaCuRCj3XZKTSDl8L6FIyPESCFZisSYm2F76Wjisn5TZlgYrekJPWLPErdKKm8kfxGfgVODFVyHATBpXJbU2FpDYGdwzGi2rkzqBC064a2fIrSP5VZTZQsZVIa8i/Y1M1JTJ86p9LZrWhdpSB01c6SqtJ/ApM1RtSYmDErzB4b0uJc0qYXyEsUzUlpDoKNFgh9LZjCkn1KTAWqhD4umvyScrJUULDFTTvsMMhxu4YimiFUfhVLSSTvPsAUMQqhMKbw0ICGckXf3giVsEHZO6vxsiIVewC7kqsUAZksR4lerENjPAquCCLhTAxtrv4Lr+CT6Rlh4hzCpSKKozQrGUGiDUKjIkrjMBEvTEg+FXsfyJWiLfRm96LV+unGPy0B6R83NuI73qAeKq/9h4epjgZ6w/Rt8Db2EeBCq4DFdQztUuy2mWKA0d9oq8RVULTNY+UMaKcyfdIao+oE/rKRqIvsCtMtpT7DVEPKD7Ga13IAAAAAElFTkSuQmCC\"","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n"],"sourceRoot":""}